<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Web Page</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <header>
        <h1>Welcome to the Static Web Page</h1>
        <button id="signup-button">Sign Up</button>
        <button id="login-button">Login</button>
    </header>
    <main id="main-content">
        <p></p>
        <section id="content">
            <p>This is a static web page that connects to APIs.</p>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Static Web Page</p>
    </footer>
    <script>
      console.log("Inicio de script.");
        // Primero se carga la configuración desde config.json
        fetch("./config.json")
          .then(response => {
            if (!response.ok) {
              throw new Error("Config file not found!");
            }
            return response.json();
          })
          .then(config => {
            // Asignamos la API key a una variable global
            window.INDIGITALL_API_KEY = config.API_KEY;
            console.log("Loaded API Key.");
      
            // Creamos dinámicamente la etiqueta de script para cargar el SDK
            var sdkScript = document.createElement("script");
            sdkScript.src = "./indigitall/sdk.min.js";
            sdkScript.onload = function() {
              // Una vez cargado el SDK, inicializamos la librería usando la API key
              console.log("sdk.min.js loaded.");
              indigitall.init({
                appKey: window.INDIGITALL_API_KEY,
                logLevel: indigitall.LogLevel.DEBUG,
                workerPath: './indigitall/worker.min.js',
                requestLocation: true
              });


            };
            const nameValue = window.indigitall.topicsList();
      indigitall.topicsSubscribe(topics);
            // Insertamos el script en el <head> (o en el <body> según convenga)
            document.head.appendChild(sdkScript);
          })
          .catch(error => console.error("Failed to load API key:", error));
      
    </script>
</body>
</html>